# CI/CD

Quando estipulado fluxo e automações para promoções de _features_, pensem no modelo de avaliação dessas entregas, utilizem barreiras como um "check" de qualidade para estas. Aqui seguem alguns parâmetros de aceite que podem ser utilizados para manter a qualidade do ambiente:

| Tipo                 | O que avaliar                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Código fonte         | Criem um processo de revisão de código antes mesmo da promoção do pacote para ambientes integrados (int, qa, uat etc). Práticas como a de _code review_ atuam diretamente na avaliação da qualidade das entregas e rapidamente mitigam falta de padronização e débitos técnicos no desenvolvimento de soluções. Utilizem dos recuros de merge _request/pull request_ existente em sua ferramenta de gestão de repositório. Em algumas delas podem ser utilizadas regras para bloquear _branches_ por meio da obrigatoriedade deles ;) (super aconselhado). Utilize de ferramentas para análise estática de código, SonarCube, LINT etc, lembre de criar e utilizar o _rule set_ do [APEX PMD](https://pmd.github.io/latest/pmd\_rules\_apex.html) para reforçar esses pontos. |
| Cobertura de classes | Estipulem um piso (ex. 80%) para cobertura de código e avaliem com frequência. Utilizem das ferramentas disponíveis para geração desses _reports_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Testes unitários     | Classes de testes devem existir para cada classe APEX criada, a cobertura deve ter o indicador mínimo informado pela governança, e cada método em classe devem existir testes utilizando do método _System.Assert_ para todos os retornos ou alterações realizadas em objetos por esses métodos. Uma indicação forte para escrita de testes bem feita é utiliza de patterns como inversão e injeção de dependência e _mock_, segue link: [Writing True Unit Tests Using Dependency Injection And Mocking](https://www.salesforce.com/video/306475/)                                                                                                                                                                                                                           |

### Links Externos

1. [Salesforce build package from git log](https://github.com/renanlq/utils/tree/main/bash/salesforce-build)
